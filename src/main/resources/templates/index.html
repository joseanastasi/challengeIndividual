<!DOCTYPE html>
<html xmls:th="https://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Index</title>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="css/style.css" >

</head>
<body class="index">

	<div class="container  mt-4">
	<div th:with="disableFields=!${editMode} and ${#authorization.expression('hasRole(''ROLE_USER'')')}">
	
	<a th:href="@{/add}" class="btn btn-primary">Add Budget</a>	
	<a th:href="@{/userForm}" class="btn btn-primary">Users list</a>	
	
	<a class="btn btn-primary" href="#" th:href="@{/logout}"><span th:text="${#authentication.getPrincipal().getUsername()}"></span> - <span>logout</span></a>				   	
	<br><br>
	<div><label>Balance:</label><label th:text="${suma}"></label></div>	
		<table class="table">
			<thead>
				<tr>
					<th>Concept</th>
					<th>Amount</th>
					<th>Date</th>
					<th>Type</th>
				</tr>				
			</thead>
			<tbody>
				<tr th:each="budget:${budgets}">
					<td th:text="${budget.concept}"></td>
					<td th:text="${budget.amount}"></td>
					<td th:text="${budget.date}"></td>
					<td th:text="${budget.type}"></td>
					<td>
						<a th:href="@{/edit/}+${budget.noTxn}" class="btn btn-warning">Edit</a>
						<a th:href="@{/delete/}+${budget.noTxn}" class="btn btn-danger">Delete</a>
					</td>
				</tr>
			</tbody>					
		</table>
	</div>
	</div>
</body>
</html>